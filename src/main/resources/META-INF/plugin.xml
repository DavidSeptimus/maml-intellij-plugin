<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>com.davidseptimus.maml</id>
    <name>MAML</name>
    <vendor>David Septimus</vendor>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.json</depends>




  <resource-bundle>messages.MamlBundle</resource-bundle>

  <extensions defaultExtensionNs="com.intellij">
    <fileType implementationClass="com.davidseptimus.maml.lang.MamlFileType"
              language="MAML"
              order="first"
              name="MAML"
              extensions="maml"/>
    <lang.quoteHandler language="MAML" implementationClass="com.davidseptimus.maml.editor.MamlQuoteHandler"/>
    <lang.braceMatcher language="MAML" implementationClass="com.davidseptimus.maml.editor.MamlBraceMatcher"/>
    <colorSettingsPage implementation="com.davidseptimus.maml.highlighting.MamlColorSettingsPage"/>

    <!-- Settings -->
    <applicationService serviceImplementation="com.davidseptimus.maml.settings.MamlSettings"/>
    <applicationConfigurable parentId="language"
                             instance="com.davidseptimus.maml.settings.MamlSettingsConfigurable"
                             id="com.davidseptimus.maml.settings.MamlSettingsConfigurable"
                             key="settings.displayName"
                             bundle="messages.MamlBundle"/>
  </extensions>

  <extensions defaultExtensionNs="com.intellij.json">
    <jsonSchemaEnabler implementation="com.davidseptimus.maml.json.MamlJsonSchemaEnabler"/>
    <jsonLikePsiWalkerFactory implementation="com.davidseptimus.maml.json.MamlJsonLikePsiWalkerFactory"/>
  </extensions>

  <extensions defaultExtensionNs="com.intellij">
    <!-- JSON Schema-based completion and documentation -->
    <completion.contributor language="MAML"
                            implementationClass="com.davidseptimus.maml.json.MamlJsonSchemaCompletionContributor"/>
    <lang.documentationProvider language="MAML"
                                implementationClass="com.davidseptimus.maml.json.MamlJsonSchemaDocumentationProvider"/>

    <!-- Annotators -->
    <annotator language="MAML"
                implementationClass="com.davidseptimus.maml.annotators.MamlSyntaxErrorAnnotator"/>
    <annotator language="MAML"
                implementationClass="com.davidseptimus.maml.annotators.MamlKeyAnnotator"/>
    <annotator language="MAML"
                implementationClass="com.davidseptimus.maml.annotators.MamlStringEscapeAnnotator"/>
    <annotator language="MAML"
                implementationClass="com.davidseptimus.maml.annotators.MamlReferenceAnnotator"/>

    <!-- JSON Schema validation -->
    <localInspection language="MAML"
                     groupKey="inspection.schema.compliance.group.name"
                     groupBundle="messages.MamlBundle"
                     key="inspection.schema.compliance.display.name"
                     bundle="messages.MamlBundle"
                     shortName="MamlSchemaCompliance"
                     enabledByDefault="true"
                     level="ERROR"
                     implementationClass="com.davidseptimus.maml.inspections.MamlJsonSchemaComplianceInspection"/>

    <!-- Duplicate keys detection -->
    <localInspection language="MAML"
                     groupKey="inspection.duplicate.keys.group.name"
                     groupBundle="messages.MamlBundle"
                     key="inspection.duplicate.keys.display.name"
                     bundle="messages.MamlBundle"
                     shortName="MamlDuplicateKeys"
                     enabledByDefault="true"
                     level="ERROR"
                     implementationClass="com.davidseptimus.maml.inspections.MamlDuplicateKeysInspection"/>

    <!-- Invalid escape sequences -->
    <localInspection language="MAML"
                     groupKey="inspection.invalid.escape.group.name"
                     groupBundle="messages.MamlBundle"
                     key="inspection.invalid.escape.display.name"
                     bundle="messages.MamlBundle"
                     shortName="MamlInvalidEscape"
                     enabledByDefault="true"
                     level="ERROR"
                     implementationClass="com.davidseptimus.maml.inspections.MamlInvalidEscapeInspection"/>

    <!-- Invalid identifier keys -->
    <localInspection language="MAML"
                     groupKey="inspection.invalid.key.group.name"
                     groupBundle="messages.MamlBundle"
                     key="inspection.invalid.key.display.name"
                     bundle="messages.MamlBundle"
                     shortName="MamlInvalidKey"
                     enabledByDefault="true"
                     level="ERROR"
                     implementationClass="com.davidseptimus.maml.inspections.MamlInvalidKeyInspection"/>

    <!-- Intention actions -->
    <intentionAction>
      <language>MAML</language>
      <className>com.davidseptimus.maml.intentions.ConvertToMultilineStringIntention</className>
      <categoryKey>intention.category.maml.key</categoryKey>
    </intentionAction>
    <intentionAction>
      <language>MAML</language>
      <className>com.davidseptimus.maml.intentions.ConvertToSingleLineStringIntention</className>
      <categoryKey>intention.category.maml.key</categoryKey>
    </intentionAction>

    <!-- Refactoring -->
    <renamePsiElementProcessor implementation="com.davidseptimus.maml.refactoring.MamlRenamePsiElementProcessor"/>

    <!-- Inlay Hints -->
    <codeInsight.inlayProvider language="MAML"
                               implementationClass="com.davidseptimus.maml.hints.MamlInlayHintsProvider"/>
  </extensions>

  <extensions defaultExtensionNs="com.intellij.lang">
      <parserDefinition language="MAML"
                        implementationClass="com.davidseptimus.maml.lang.MamlParserDefinition"/>
      <syntaxHighlighterFactory language="MAML"
                                implementationClass="com.davidseptimus.maml.highlighting.MamlSyntaxHighlighterFactory"/>
    <commenter language="MAML"
               implementationClass="com.davidseptimus.maml.editor.MamlCommenter"/>
    <foldingBuilder language="MAML"
                    implementationClass="com.davidseptimus.maml.editor.MamlFoldingBuilder"/>
    <namesValidator language="MAML"
                    implementationClass="com.davidseptimus.maml.refactoring.MamlNamesValidator"/>
    <psiStructureViewFactory language="MAML"
                             implementationClass="com.davidseptimus.maml.structure.MamlStructureViewFactory"/>
  </extensions>
</idea-plugin>
